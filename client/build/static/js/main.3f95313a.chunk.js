(this["webpackJsonpcustomer-client"]=this["webpackJsonpcustomer-client"]||[]).push([[0],{258:function(e,t){},260:function(e,t){},274:function(e,t){},276:function(e,t){},304:function(e,t){},306:function(e,t){},307:function(e,t){},312:function(e,t){},314:function(e,t){},333:function(e,t){},345:function(e,t){},348:function(e,t){},373:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(60),r=n.n(c),i=n(423),s=n(17),l=n(433),d=n(434),j=n(435),m=n(425),b=n(437),h=n(432),u=n(222);var g=Object(u.a)({palette:{orange:{main:"#F27D52",contrastText:"#ffffff"},beige:{main:"#EDCC99"},green:{main:"#77DDAB",contrastText:"#ffffff"},brown:{main:"#776533",contrastText:"#ffffff"},grey:{main:"#959595"},white:{main:"#FFFFFF"}}});const O="https://bwiky-api.herokuapp.com";var x=n(14),p=n.n(x),v=n(20),f=n.n(v),y=n(1);var A=e=>{const{auth:t,setAuth:n}=e,a=Object(s.g)();return Object(y.jsx)(h.a,{theme:g,children:Object(y.jsx)(l.a,{container:!0,direction:"row",justify:"center",children:Object(y.jsxs)(d.a,{maxWidth:"sm",style:{marginTop:"5%"},children:[Object(y.jsxs)(l.a,{container:!0,direction:"column",justify:"center",spacing:3,children:[Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(j.a,{variant:"h3",children:"Hello!"})}),Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(j.a,{variant:"subtitle",children:"Please enter your van name and password to log in."})})]}),Object(y.jsx)("br",{}),Object(y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault();const t={van_name:e.target.van_name.value,password:e.target.password.value};p()({url:"".concat(O,"/vendors/login"),method:"POST",data:t,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{n(e.data);const t=f.a.decode(e.data);t?(console.log(e.data),console.log(t),a.push("/vendor/checkin")):console.err("Invalid token")})).catch((e=>{console.error(e),console.log("Invalid login"),a.push("/vendor")}))},children:Object(y.jsxs)(l.a,{container:!0,direction:"column",justify:"center",spacing:3,children:[Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(m.a,{required:!0,variant:"outlined",name:"van_name",type:"van_name",label:"Van Name",color:"orange"})}),Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(m.a,{required:!0,variant:"outlined",name:"password",type:"password",label:"Password",color:"orange"})}),Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(b.a,{variant:"contained",color:"orange",disableElevation:!0,children:"Log In"})})]})})]})})})};var w=e=>{const{auth:t,setAuth:n}=e,[o,c]=Object(a.useState)(null),r=Object(s.g)();Object(a.useEffect)((()=>{o||navigator.geolocation.getCurrentPosition((e=>{console.log("got location lat ".concat(e.coords.latitude," long ").concat(e.coords.longitude)),c(e)})),o||c({coords:{latitude:-37.80435,longitude:144.96296}})}),[]);return Object(y.jsx)(h.a,{theme:g,children:Object(y.jsx)(l.a,{container:!0,direction:"row",justify:"center",children:Object(y.jsx)(d.a,{style:{marginTop:"5%"},children:Object(y.jsxs)(l.a,{container:!0,direction:"column",justify:"center",spacing:3,children:[Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsxs)(j.a,{variant:"h4",children:["Welcome Back ",t?f.a.decode(t).van_name:null,"!"]})}),Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(j.a,{variant:"subtitle",children:"Please enter your location to check in."})}),Object(y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),console.log("Vendor Check In");const n={"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},a={location:{lat:o.coords.latitude,long:o.coords.longitude,simple:e.target.location_string.value},ready:!0};p()({url:"".concat(O,"/vendors/").concat(f.a.decode(t)._id),method:"PATCH",data:a,headers:n}).then((e=>{e.data&&(console.log("Checking in Location for vendor %s",f.a.decode(t)._id),console.log(a),r.push("/vendor/orders"))})).catch((e=>{console.error(e)}))},children:Object(y.jsxs)(l.a,{container:!0,direction:"column",justify:"center",spacing:3,children:[Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(m.a,{required:!0,variant:"outlined",label:"Location",name:"location_string",type:"location_string",color:"orange"})}),Object(y.jsx)(l.a,{item:!0,style:{margin:"auto"},children:Object(y.jsx)(b.a,{variant:"contained",color:"orange",disableElevation:!0,children:"Check In"})})]})})]})})})})},C=n(438),I=n(429),k=n(439),S=n(440),P=n(441),D=n(442),B=n(443),_=n(444),T=n(445),R=n(446),N=n(426),z=n(428),F=n(421);function W(e){var t={};return e&&e.forEach((e=>t[e._id]=e)),t}function Y(e,t){var n,a="";if(e&&0!==Object.keys(t).length)for(n=0;n<e.items.length;n++)a+=t[e.items[n].item].item_name+" x"+e.items[n].quantity+" ";return a}function L(e){const t=new Date(e);return new Date-t<=6e5&&(console.log("Checking modify window"),!0)}function G(e){var t=new Date(e).toString().split(" ");const n=t[4].slice(0,5);var a="",o=0;for(o=0;o<4;o++)a=a+t[o]+" ";return a+=n}function V(e){var t=new Date(e).getHours(),n=new Date(e).getMinutes();t<10&&(t="0"+t);n<10&&(n="0"+n);return t+":"+n}function M(e){const t=new Date(e.fulfilled_time),n=new Date(e.modified),a=new Date;return e.fulfilled?t-n>9e5&&(console.log("Checking Discount"),console.log((t-n).toString()),!0):a-n>9e5&&(console.log("Checking Discount"),!0)}function E(e){var t=new Date(e.modified);return t.setMinutes(t.getMinutes()+15),V(t)}function H(e){var t=9e5-(new Date-new Date(e.modified));const n=Math.trunc(t/1e3/60),a=Math.trunc(t/1e3%60);return t>0?n.toString()+":"+a.toString():"0:00"}const Z=Object(F.a)((e=>({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(20),flexBasis:"33.33%",flexShrink:0,color:e.palette.warning.light},secondaryHeading:{marginTop:"0.25em",fontSize:e.typography.pxToRem(15),flexBasis:"80%",flexShrink:0,color:e.palette.text.secondary}})));var q=e=>{const t=Z(),[n,c]=Object(a.useState)(null),[r,i]=Object(a.useState)(null),[m,h]=Object(a.useState)(!1),[u,g]=o.a.useState(!1),x=Object(s.g)(),{order:v,auth:f,setAuth:A}=e;var w,F="";return Object(a.useEffect)((()=>{const e={"Content-Type":"application/json",Authorization:"Bearer ".concat(f)};console.log("Getting Customer Name"),p()("".concat(O,"/customers/").concat(v.customer),{headers:e}).then((e=>{i(e.data)})).catch((e=>{console.error(e),console.log("Invalid customer")}))}),[]),Object(a.useEffect)((()=>{console.log("getting items"),p()("".concat(O,"/items")).then((e=>{c(e.data)}))}),[]),w=W(n),r&&(F=r.given_name+" "+r.family_name),Object(y.jsx)(C.a,{className:t.root,style:{marginBottom:"5px"},children:Object(y.jsxs)(I.a,{expanded:u===v._id,onChange:(L=v._id,(e,t)=>{g(!!t&&L)}),children:[Object(y.jsxs)(k.a,{id:v._id,children:[Object(y.jsxs)(j.a,{className:t.heading,children:[H(v)," mins"]}),Object(y.jsxs)(j.a,{className:t.secondaryHeading,children:["Order #",parseInt(v._id.slice(-4),16).toString().slice(-4)," : ",Y(v,w)]})]}),Object(y.jsx)(S.a,{children:Object(y.jsx)("div",{style:{overflowX:"hidden",overflowY:"hidden"},children:Object(y.jsx)(d.a,{children:Object(y.jsxs)(l.a,{container:!0,direction:"row",justify:"space-around",spacing:3,style:{height:"100%"},children:[Object(y.jsx)(l.a,{item:!0,xs:7,children:Object(y.jsx)(l.a,{container:!0,direction:"column",justify:"space-around",alignItems:"stretch",style:{height:"100%"},children:0!==Object.keys(w).length&&Object(y.jsx)(l.a,{item:!0,xs:8,children:Object(y.jsx)(P.a,{children:Object(y.jsxs)(D.a,{children:[Object(y.jsx)(B.a,{children:Object(y.jsx)(_.a,{children:["Item","Qty","Status"].map((e=>Object(y.jsx)(T.a,{children:e},e)))})}),Object(y.jsx)(R.a,{children:Object.keys(v.items).map(((e,t)=>Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{children:w[v.items[e].item].item_name}),Object(y.jsx)(T.a,{children:v.items[e].quantity}),Object(y.jsx)(T.a,{children:Object(y.jsx)(N.a,{color:"primary"})})]},t)))})]})})})})}),Object(y.jsxs)(l.a,{item:!0,xs:4,children:[Object(y.jsx)(j.a,{variant:"subtitle2",style:{marginTop:"1em",marginLeft:"1em"},children:"Customer Details"}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginLeft:"1em"},children:["Name : ",F]}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginLeft:"1em"},children:["Order Placed : ",V(v.modified)]}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginLeft:"1em"},children:["Order Deadline : ",E(v)]}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginLeft:"1em"},children:["Discount : ",M(v)?"20":"0","%"]}),Object(y.jsx)(b.a,{variant:"outlined",style:{marginLeft:"1em",marginTop:"1em"},onClick:e=>{e.preventDefault(),console.log("Fulfilling order"),x.push("/vendor/orders");const t={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(f)};h((e=>!e)),p()({url:"".concat(O,"/vendors/").concat(v.vendor,"/orders/").concat(v._id),method:"PATCH",data:{fulfilled:!0},headers:t}).catch((e=>{console.error(e)}))},children:Object(y.jsx)(j.a,{variant:"button",display:"block",children:"Complete"})}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:m,onClose:()=>{h(!1)},message:"Order marked as complete!"})]})]})})})})]})});var L};const J=Object(F.a)((e=>({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(20),flexBasis:"33.33%",flexShrink:0,color:e.palette.success.light},secondaryHeading:{marginTop:"0.25em",fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0,color:e.palette.text.secondary}})));var Q=e=>{const t=J(),[n,c]=Object(a.useState)(null),[r,i]=Object(a.useState)(null),[m,h]=o.a.useState(!1),u=Object(s.g)(),{order:g,auth:x,setAuth:v}=e;var f,A="";const[w,P]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{console.log("Getting Customer Name");const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(x)};p()("".concat(O,"/customers/").concat(g.customer),{headers:e}).then((e=>{i(e.data)})).catch((e=>{console.error(e),console.log("Invalid customer")}))}),[]),Object(a.useEffect)((()=>{console.log("getting items"),p()("".concat(O,"/items")).then((e=>{c(e.data)}))}),[]),f=W(n),r&&(A=r.given_name+" "+r.family_name),Object(y.jsx)(C.a,{className:t.root,style:{marginBottom:"5px"},children:Object(y.jsxs)(I.a,{expanded:m===g._id,onChange:(D=g._id,(e,t)=>{h(!!t&&D)}),children:[Object(y.jsxs)(k.a,{id:g._id,children:[Object(y.jsxs)(j.a,{className:t.heading,children:["Order #",parseInt(g._id.slice(-4),16).toString().slice(-4)]}),Object(y.jsx)(j.a,{className:t.secondaryHeading,children:A})]}),Object(y.jsx)(S.a,{children:Object(y.jsx)("div",{style:{overflowX:"hidden",overflowY:"hidden"},children:Object(y.jsx)(d.a,{children:Object(y.jsxs)(l.a,{item:!0,xs:12,children:[Object(y.jsx)(j.a,{variant:"subtitle2",style:{marginBottom:"1em"},children:Y(g,f)}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginBottom:"1em"},children:["Order Placed : ",V(g.modified)]}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginBottom:"1em"},children:["Order Fulfilled : ",V(g.fulfilled_time)]}),Object(y.jsxs)(j.a,{variant:"body2",style:{marginBottom:"1em"},children:["Discount : ",M(g)?"20":"0","%"]}),Object(y.jsx)(b.a,{variant:"outlined",style:{marginTop:"1em"},onClick:e=>{e.preventDefault(),u.push("/vendor/orders"),console.log("Picking up order");const t={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(x)};P((e=>!e)),p()({url:"".concat(O,"/vendors/").concat(g.vendor,"/orders/").concat(g._id),method:"PATCH",data:{picked_up:!0},headers:t}).catch((e=>{console.error(e)}))},children:Object(y.jsx)(j.a,{variant:"button",display:"block",children:"Picked Up"})}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:w,onClose:()=>{P(!1)},message:"Order marked as picked up!"})]})})})})]})});var D};var U=e=>{const[t,n]=Object(a.useState)(null),{auth:o,setAuth:c}=e;return Object(a.useEffect)((()=>{console.log("Getting vendor orders");const e={"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},t=setInterval((()=>{if(o){const t=o?f.a.decode(o)._id:null;console.log(o),console.log("Vendor id is %s",t),p()("".concat(O,"/vendors/").concat(t,"/orders"),{headers:e}).then((e=>{n(e.data)}))}else console.log("no auth yet, so let's wait until they're logged in")}),800);return()=>clearInterval(t)}),[o]),o?Object(y.jsx)("div",{style:{overflowX:"hidden",overflowY:"hidden"},children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)("h1",{children:"Order List"}),Object(y.jsxs)(l.a,{container:!0,direction:"row",justify:"space-between",alignItems:"flex-start",spacing:2,children:[Object(y.jsxs)(l.a,{item:!0,xs:8,children:[Object(y.jsx)(j.a,{variant:"h6",style:{marginTop:"1em",marginBottom:"1em",marginLeft:"1em"},children:"Outstanding Orders"}),null==t?null:0===t.length?"You have no current or past orders!":t.sort(((e,t)=>-(new Date(t.modified)-new Date(e.modified)))).filter((e=>!e.fulfilled)).map((e=>Object(y.jsx)(l.a,{container:!0,direction:"column",spacing:2,children:Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(q,{order:e,auth:o,setAuth:c})})})))]}),Object(y.jsxs)(l.a,{item:!0,xs:4,children:[Object(y.jsx)(j.a,{variant:"h6",style:{marginTop:"1em",marginBottom:"1em",arginLeft:"1em"},children:"Orders Awaiting Pick Up"}),null==t?null:0===t.length?"You have no current or past orders!":t.sort(((e,t)=>-(new Date(t.modified)-new Date(e.modified)))).filter((e=>e.fulfilled&&!e.picked_up)).map((e=>Object(y.jsx)(l.a,{container:!0,direction:"column",spacing:2,children:Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(Q,{order:e,auth:o,setAuth:c})})})))]})]})]})}):Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"Order List"}),Object(y.jsx)(j.a,{variant:"subtitle",children:"Please log in before viewing your orders!"})]})},X=n(447);const K=["Item","Qty","Subtotal"],$=new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}),ee=Object(F.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});var te=e=>{const{order:t,auth:n,setAuth:o}=e,[c,r]=Object(a.useState)(""),[i,s]=Object(a.useState)(null),[l,d]=Object(a.useState)(!1);var m="";var b;const h=ee();return Object(a.useEffect)((()=>{console.log("Getting Customer");const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)};p()("".concat(O,"/customers/").concat(t.customer),{headers:e}).then((e=>{r(e.data)})).catch((e=>{console.error(e),console.log("Invalid customer")}))}),[]),Object(a.useEffect)((()=>{console.log("getting items"),p()("".concat(O,"/items")).then((e=>{s(e.data)}))}),[]),b=W(i),c&&(m=c.given_name+" "+c.family_name),Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(C.a,{className:h.root,variant:"outlined",style:{marginTop:"20px"},children:0!==b.length&&Object(y.jsxs)(X.a,{children:[Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",children:["Order"," "]}),Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",style:{color:"#FAA545"},children:["#",parseInt(t._id.slice(-4),16).toString().slice(-4)]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["Ordered by ",m," ",t.modified?"on ".concat(G(t.modified)):null]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["Discount "," ",M(t)?"20":"0","% applied"]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["Fulfilled at "," ",t.fulfilled?"".concat(V(t.fulfilled_time)):null]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["Picked Up ","\ud83d\uddf9"]}),0!==Object.keys(b).length&&t.items&&0!==Object.keys(t.items).length&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(P.a,{children:Object(y.jsxs)(D.a,{children:[Object(y.jsx)(B.a,{children:Object(y.jsx)(_.a,{children:K.map((e=>Object(y.jsx)(T.a,{children:e},e)))})}),Object(y.jsxs)(R.a,{children:[Object.keys(t.items).map(((e,n)=>Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{children:b[t.items[e].item].item_name}),Object(y.jsx)(T.a,{children:t.items[e].quantity}),Object(y.jsx)(T.a,{children:$.format(t.items[e].quantity*b[t.items[e].item].item_price)})]},n))),Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{children:Object(y.jsxs)(j.a,{variant:"subtitle2",gutterBottom:!0,children:["Total:"," ",$.format(Object.keys(t.items).map((e=>t.items[e].quantity*b[t.items[e].item].item_price)).reduce(((e,t)=>e+t)))]})})]})]})]})}),Object(y.jsx)("br",{})]})]})})})};var ne=e=>{const[t,n]=Object(a.useState)(null),{auth:o,setAuth:c}=e;return Object(a.useEffect)((()=>{console.log("Getting vendor orders");const e={"Content-Type":"application/json",Authorization:"Bearer ".concat(o)};if(o){const t=o?f.a.decode(o)._id:null;console.log(o),console.log("Vendor id is %s",t),p()("".concat(O,"/vendors/").concat(t,"/orders"),{headers:e}).then((e=>{n(e.data)}))}else console.log("no auth yet, so let's wait until they're logged in")}),[o]),o?Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"Order History"}),null==t?null:0===t.length?"You have no past orders!":t.sort(((e,t)=>-(new Date(e.modified)-new Date(t.modified)))).filter((e=>e.fulfilled&&e.picked_up)).map((e=>Object(y.jsx)(te,{order:e,auth:o,setAuth:c})))]}):Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"Order List"}),Object(y.jsx)(j.a,{variant:"subtitle",children:"Please log in before viewing your orders!"})]})},ae=n(422),oe=n(448),ce=n(449),re=n(450),ie=n(21);const se=Object(F.a)((e=>({root:{flexGrow:1},title:{flexGrow:1,color:"black"},text:{color:"black"}})));var le=e=>{const{auth:t,setAuth:n}=e,a=se(),o=Object(ae.a)("(min-width:410px)"),c=Object(ae.a)("(min-width:600px)"),r=Object(ae.a)("(min-width:750px)"),i=Object(s.g)();return Object(y.jsx)(d.a,{children:Object(y.jsx)("div",{className:a.root,style:{backgroundColor:"white",color:"white"},xs:2,children:Object(y.jsx)(oe.a,{position:"static",className:a.appBar,style:{backgroundColor:"#fafafa",boxShadow:"none",marginTop:"0.5rem"},children:Object(y.jsx)(ce.a,{children:Object(y.jsxs)(l.a,{container:!0,direction:r?"row":"column",alignItems:"center",style:{justifyContent:"space-between"},children:[Object(y.jsx)(l.a,{item:!0,xs:12,sm:4,md:4,lg:4,style:{display:"flex"},children:Object(y.jsx)(re.a,{component:ie.b,to:"/vendor/orders",style:{textDecoration:"none"},children:Object(y.jsx)(re.a,{component:"img",image:"/navLogo2.png",title:"Food Truck",style:{height:"80px"}})})}),Object(y.jsx)(l.a,{item:!0,xs:12,sm:7,md:6,lg:5,style:{marginTop:"0.5em",marginBottom:"0.5em",width:o?"":"100%"},children:t&&Object(y.jsxs)(l.a,{container:!0,direction:o?"row":"column",spacing:o?0:1,style:{justifyContent:r?"flex-end":"center",alignItems:"stretch"},justify:"flex-end",alignItems:"stretch",children:[Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%"},children:Object(y.jsx)(b.a,{component:ie.b,to:"/vendor/orders",style:{textDecoration:"none"},children:"Current Orders"})})}),Object(y.jsx)(l.a,{item:!0,style:{marginLeft:o?"0.5em":"0px"},children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%"},children:Object(y.jsx)(b.a,{component:ie.b,to:"/vendor/history",style:{textDecoration:"none"},children:"Past Orders"})})}),Object(y.jsx)(l.a,{item:!0,style:{marginLeft:o?"0.5em":"0px"},children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%",textDecoration:"none"},onClick:e=>{e.preventDefault(),console.log("Checked Out"),e.preventDefault();const a={"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},o={ready:!1};p()({url:"".concat(O,"/vendors/").concat(f.a.decode(t)._id),method:"PATCH",data:o,headers:a}).then((e=>{e.data&&(console.log("Checking Out of Location for vendor %s",f.a.decode(t)._id),console.log(o),i.push("/vendor"))})).catch((e=>{console.error(e)})),n(null)},children:Object(y.jsx)(b.a,{style:{textDecoration:"none"},children:"Check Out"})})})]})})]})})})})})};var de=function(){const[e,t]=Object(a.useState)(null);return Object(y.jsxs)("div",{children:[Object(y.jsx)(i.a,{}),Object(y.jsx)(le,{auth:e,setAuth:t}),Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{exact:!0,path:"/vendor/",render:n=>Object(y.jsx)(A,{auth:e,setAuth:t})}),Object(y.jsx)(s.b,{exact:!0,path:"/vendor/checkin",render:n=>Object(y.jsx)(w,{auth:e,setAuth:t})}),Object(y.jsx)(s.b,{exact:!0,path:"/vendor/orders",render:n=>Object(y.jsx)(U,{...n,auth:e,setAuth:t})}),Object(y.jsx)(s.b,{exact:!0,path:"/vendor/history",render:n=>Object(y.jsx)(ne,{auth:e,setAuth:t})})]})]})};const je=Object(F.a)((e=>({root:{flexGrow:1},title:{flexGrow:1,color:"black"},text:{color:"black"}})));var me=e=>{const{order:t,auth:n}=e,a=je(),o=Object(ae.a)("(min-width:410px)"),c=Object(ae.a)("(min-width:600px)"),r=Object(ae.a)("(min-width:750px)");return Object(y.jsx)(d.a,{children:Object(y.jsx)("div",{className:a.root,style:{backgroundColor:"white",color:"white"},xs:2,children:Object(y.jsx)(oe.a,{position:"static",className:a.appBar,style:{backgroundColor:"#fafafa",boxShadow:"none",marginTop:"0.5rem"},children:Object(y.jsx)(ce.a,{children:Object(y.jsxs)(l.a,{container:!0,direction:r?"row":"column",alignItems:"center",style:{justifyContent:"space-between"},children:[Object(y.jsx)(l.a,{item:!0,xs:12,sm:4,md:4,lg:4,style:{display:"flex"},children:Object(y.jsx)(re.a,{component:ie.b,to:"/customer/",style:{textDecoration:"none"},children:Object(y.jsx)(re.a,{component:"img",image:"/navLogo2.png",title:"Food Truck",style:{height:"80px"}})})}),Object(y.jsx)(l.a,{item:!0,xs:12,sm:7,md:6,lg:4,style:{marginTop:"0.5em",marginBottom:"0.5em",width:o?"":"100%"},children:Object(y.jsxs)(l.a,{container:!0,direction:o?"row":"column",spacing:o?0:1,style:{justifyContent:r?"flex-end":"center",alignItems:"stretch"},justify:"flex-end",alignItems:"stretch",children:[Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%"},children:Object(y.jsx)(b.a,{component:ie.b,to:"/customer/",style:{textDecoration:"none"},children:"Find a Van"})})}),Object(y.jsx)(l.a,{item:!0,style:{marginLeft:o?"0.5em":"0px"},children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%"},children:Object(y.jsx)(b.a,{component:ie.b,to:"/customer/login",style:{textDecoration:"none"},children:n?f.a.decode(n).given_name:"Log in"})})}),Object(y.jsx)(l.a,{item:!0,style:{marginLeft:o?"0.5em":"0px"},children:Object(y.jsx)(b.a,{variant:"outlined",className:a.text,size:c?"medium":"small",style:{width:o?"":"100%"},children:Object(y.jsxs)(b.a,{component:ie.b,to:"/customer/myorder",style:{textDecoration:"none"},children:["My Order"," ",null==t?"":Object(y.jsxs)(y.Fragment,{children:["(",Object.keys(t.items).map((e=>t.items[e].quantity)).reduce(((e,t)=>e+t),0),")"]})]})})})]})})]})})})})})},be=n(34),he=n.n(be);const ue=Object(F.a)((e=>({root:{background:"black"},distanceText:{float:"right"}})));var ge=e=>{const t=ue(),n=Object(ae.a)("(min-width:410px)"),a=e.distance<2?"Within 2km from you!":Math.round(10*e.distance)/10+"km from you";return Object(y.jsx)(C.a,{className:t.root,classes:{},style:{marginTop:"40px"},children:Object(y.jsx)(C.a,{component:ie.b,to:"/customer/van/".concat(e._id),style:{textDecoration:"none"},children:Object(y.jsxs)(l.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",spacing:0,children:[Object(y.jsx)(l.a,{item:!0,xs:12,md:2,children:Object(y.jsx)(re.a,{component:"img",image:"/foodTrucks/foodTruck".concat(e.number+1,".jpg"),title:"Food Truck"})}),Object(y.jsx)(l.a,{item:!0,xs:12,md:4,children:Object(y.jsxs)(X.a,{children:[Object(y.jsx)(j.a,{variant:"h5",component:"h2",className:t.content,children:e.title}),Object(y.jsx)(j.a,{variant:"body1",component:"p",children:e.simpleLocation})]})}),Object(y.jsx)(l.a,{item:!0,md:4,xs:12,children:Object(y.jsx)(X.a,{children:Object(y.jsxs)(he.a,{rating:parseFloat(e.rating),widgetDimensions:"30px",widgetSpacings:"8px",children:[Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"})]})})}),Object(y.jsx)(l.a,{item:!0,md:2,xs:12,children:Object(y.jsx)(X.a,{children:Object(y.jsxs)(j.a,{variant:"body1",component:"p",className:t.distanceText,children:[a," -- ",n?"click":"tap"," to view menu!"]})})})]})})})};var Oe=e=>{let{vans:t}=e;return t=t.filter((e=>e.hasOwnProperty("location"))),Object(y.jsx)(l.a,{container:!0,direction:"column",justify:"space-between",spacing:3,children:Object(y.jsxs)(l.a,{item:!0,children:[Object(y.jsx)(j.a,{variant:"h6",component:"p",children:"SNACKS near you"}),t.map(((e,t)=>Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(ge,{number:t,title:e.van_name,rating:e.rating,distance:e.distance,simpleLocation:e.location.simple,_id:e._id},t)},t)))]})})},xe=n(88),pe=n(431);var ve=e=>Object(y.jsx)(pe.a,{children:Object(y.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJwUExURf+RTf+TUP+STv+RTv+VU/+TUf+zhP/Kqv/Xvv+bXf/Hpf/i0P+VVP+9lP/RtP+aW/+2if+mcP/Psf/JqP+1iP+cX//gzf+wfv/fy//Ipv+lbf/Tt/+5jv/Ipf+reP/Qs//Psv+qdv/FoP+5jf/Ip/+YWP+eYv+4i//aw/+dYf/Amf+dYP/Kqf/dx//Dn/+qdf+ZWv/Stv+tev/q3v/Xv//OsP+oc//Dnv/Qsv/Zwf+WVP++lf+fZP+7kP+0hv+7kf+wgP+XVv+ja/++lv+pc/+4jP+XV//Lqv+mb//Or/+yg/+ST/+6kP+jav+bXv/Cnf+haP+rd//49P/k0//YwP/fzP/69//r3//Fov/28P+UU//9/P/38//8+v////+ocv/+/f+cXv+aXP///v+mbv+hZ/+1h//38v/HpP/+/v/p2//m1v/EoP+WVv/7+P+/l//Rtf/dyf+iaf/Lq/+xgf/u5P/38f+WVf/07f/Nr//Wvf/WvP/GpP/axP+seP/28f/hzv+kbP/x6P/59f/r3v/7+f/8+//u4//o2v/Fof/Nrv+/mP+6j//bxf+ocf/48//v5v/Uuv+0hf+wf//Bmv+2iP+ufP+sef+ncf+xgP+ZW//o2f/t4//x6f/Vuv/s4f/9/f/y6v/Uuf+jaf+ka//Vu//z6//z7P/TuP+fY/+ygv+eY//w5/+pdP/07v+gZf/6+P/59v/t4v/AmP/KqP/En//p3P/9+/+UUv+3i/+zg/+gZv/l1f/k1P/s4P/q3f/m1//y6f/v5f+odP+3iv/cxv/y6/++l/+7kv/Nrf+te//69v+ncP/j0v/gzv/hz+956OIAAAAJcEhZcwAAHYYAAB2GAV2iE4EAAATvaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pg0KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyI+DQogIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+DQogICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6QXR0cmliPSJodHRwOi8vbnMuYXR0cmlidXRpb24uY29tL2Fkcy8xLjAvIj4NCiAgICAgIDxBdHRyaWI6QWRzPg0KICAgICAgICA8cmRmOlNlcT4NCiAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4NCiAgICAgICAgICAgIDxBdHRyaWI6Q3JlYXRlZD4yMDIxLTAzLTE1PC9BdHRyaWI6Q3JlYXRlZD4NCiAgICAgICAgICAgIDxBdHRyaWI6RXh0SWQ+Y2I3NzI4MTQtZGUxMC00NmMyLWIwMzEtMWEyNzhlMjM3NTZlPC9BdHRyaWI6RXh0SWQ+DQogICAgICAgICAgICA8QXR0cmliOkZiSWQ+NTI1MjY1OTE0MTc5NTgwPC9BdHRyaWI6RmJJZD4NCiAgICAgICAgICAgIDxBdHRyaWI6VG91Y2hUeXBlPjI8L0F0dHJpYjpUb3VjaFR5cGU+DQogICAgICAgICAgPC9yZGY6bGk+DQogICAgICAgIDwvcmRmOlNlcT4NCiAgICAgIDwvQXR0cmliOkFkcz4NCiAgICA8L3JkZjpEZXNjcmlwdGlvbj4NCiAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPg0KICAgICAgPGRjOnRpdGxlPg0KICAgICAgICA8cmRmOkFsdD4NCiAgICAgICAgICA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPnNuYWNrcyBpbiBhIHZhbjwvcmRmOmxpPg0KICAgICAgICA8L3JkZjpBbHQ+DQogICAgICA8L2RjOnRpdGxlPg0KICAgIDwvcmRmOkRlc2NyaXB0aW9uPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnBkZj0iaHR0cDovL25zLmFkb2JlLmNvbS9wZGYvMS4zLyI+DQogICAgICA8cGRmOkF1dGhvcj5XSVNFPC9wZGY6QXV0aG9yPg0KICAgIDwvcmRmOkRlc2NyaXB0aW9uPg0KICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyI+DQogICAgICA8eG1wOkNyZWF0b3JUb29sPkNhbnZhPC94bXA6Q3JlYXRvclRvb2w+DQogICAgPC9yZGY6RGVzY3JpcHRpb24+DQogIDwvcmRmOlJERj4NCjwveDp4bXBtZXRhPg0KPD94cGFja2V0IGVuZD0iciI/Pp8DAj4AAAQgSURBVHhe7dj9X1NVHAfw7+422YqEGAs0RZSYDVYghRWSOBNDBtZAVjh3HKJDspYJK4xC55paPlBhz2LZA6iZJaWlPS0jS3v6lzpPo+ugwB8699Xr9X3z4pzvOffw2ud17919ABBCCCGEEEIIIYQQQgghhBBCCCGEEEII6ZkANPrDevZrTteaxSo2iKFhZmVlgc1+g6bdmA03Zc3Oyb05z+Rw5AM4bymAQuscumTurWKpMebNL4IFxQ5t4aIS621Q6lp8uxuKy8rpFg/AHXc6aDFnfilfaoyKyiXZnqq7tDzH3Vq1qWLp4ntKoMp5L91CA3rK7gOoKaxeJtYaotZzPyyHOlM+rPCu9DygrXLWr571YAOAe00jLPc10SPcDLlyMfo/WrvsoemVPSxXq+dvaV03vbaAUWeh+ZFHZTWZWftbbvt6OauYJeiS1STeDSEdslFOK2YJd8hqkk2dm7dQkS7WbmnbKqcV+7eA3V7WbWw3s67uMdaqN33ApSKgPeRmnXIz3oOwzZjb3Yz3IDzexjvVWEBvh4UWHU/QTM10ymsHWN1hzQzYHOVD1VjAJ0kewHZSAvBUeAdAT3cv5BF/5iHWYhHeK8YCVgaetjzT0lUD5UFSTQOSvhxdwPQehJ3Pil4tfg72k/omQp8AnyNhGrOHkOenCjiwy4gnfx6wghTu7o6Db0+imNTRgCGyZ4qApl1FolCKB9ReSO7dBlBA9m0n+2nAF0Nk8jkIYHtJFirxgHCAkIMAhwhzuIcULNIFnNiDkB+ThUoiYGlgsAbWhl72+x3kFRrQ18oCdr46RB1pYS3zWmd9g/LTUASE198AKI+8SS+CkbfiETs4I29D9jtHM8USfQf4i7I6MuBMmRqHj8lSkesMSF/n++jZqtB1B4Smd9NfGiV0ATWv9x8+2qzfUtm9SVZKTARssPWF3zv+/gdipPfhRyPh8Gj/XDmE0BRr/jsyoG9N9MSQ6+QpW3Rrxl7UHMn+3o9dQ8eiPT4xkzQi4InTcT6ET854RJG2c5RefJiG48WiMCJg7uCnYgiw+bMqWXG9Z1fKCnYkGnlvQEBt7HM5pL5olQW3X/fafO487wwIGE/yu67gDtMn6rTaL3Vf2cog389qA361l37ohWteKUd0x/jUNc8HYxdpYw1+LUaKfDNbg6Zv5YD7jsWQIt/LgkvV0+bcaaUXamj+YTh1KZDSCY3JgjqalAUXjaVSsTM/yr9UJbt3fHz8p320YS5ctslKWjcsi/FLh1i7gr78GcCVmCeKI+05okizd/0sil8GjfnXgtQYuOIGc+2SxICcmHD17IKTZnBV/zokJwzy2+/By6PBQvpenCn+R3B0JPjnxL3YMM4Bf8bhTbMXFemujQghhBBCCCGEEEIIIYQQQgghhBBCCCGkBMBfNSlK+lp6SxkAAAAASUVORK5CYII=",alt:"logo"})});const fe={id:"point",type:"circle",paint:{"circle-radius":10,"circle-color":"#007cbf"}};var ye=e=>{const{vans:t,location:n}=e,[o,c]=Object(a.useState)({width:"fit",height:"50vh",latitude:-37.80435,longitude:144.96296,zoom:14,bearing:0,pitch:0});return Object(a.useEffect)((()=>{null!=n&&c({...o,latitude:n.coords.latitude,longitude:n.coords.longitude})}),[n]),Object(y.jsx)("div",{style:{borderRadius:"10px"},children:Object(y.jsxs)(xe.d,{...o,mapStyle:"mapbox://styles/mapbox/light-v9",style:{borderRadius:"50px"},mapboxApiAccessToken:"pk.eyJ1IjoicmVnbmFyb3giLCJhIjoiY2ttenM5ZnhvMGd2ZDJ1bW9meDh5ejhvdSJ9.PMoO6NHspT3T3v5uEaC_Nw",onViewportChange:e=>c(e),children:[null!==t?t.filter((e=>e.hasOwnProperty("location"))).map((e=>({latitude:parseFloat(e.location.lat),longitude:parseFloat(e.location.long),label:e.van_name}))).map((e=>Object(y.jsx)(xe.b,{latitude:e.latitude,longitude:e.longitude,children:Object(y.jsx)(ve,{})},e.label))):"","==",null==n?"":Object(y.jsx)(xe.c,{id:"userLocation",type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[n.coords.longitude,n.coords.latitude]}}]},children:Object(y.jsx)(xe.a,{...fe})})]})})};var Ae=e=>{const{location:t,setLocation:n,vans:o,setVans:c}=e;return Object(a.useEffect)((()=>{if(t&&!o){console.log("getting vans");const e={"Access-Control-Allow-Origin":"*"};p()("".concat(O,"/vendors?lat=").concat(t.coords.latitude,"&long=").concat(t.coords.longitude,"&limit=").concat(5),{headers:e}).then((e=>{c(e.data)})).catch((e=>{console.error(e)}))}}),[t]),Object(a.useEffect)((()=>{t||navigator.geolocation.getCurrentPosition((e=>{console.log("got location lat ".concat(e.coords.latitude," long ").concat(e.coords.longitude)),n(e)})),t||n({coords:{latitude:-37.80435,longitude:144.96296}})}),[]),Object(y.jsx)("div",{style:{background:"url(".concat("","/SplashPageBackground2.jpg)"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundAttachment:"scroll",position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",height:"700px",width:"90%"},children:Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h3",style:{color:"white",paddingTop:"50px"},fontWeight:"bold",children:"Get your SNACKS"}),Object(y.jsx)(j.a,{variant:"h3",style:{color:"white",paddingTop:"20px",paddingBottom:"40px"},fontWeight:"bold",children:"from a VAN"}),Object(y.jsx)(j.a,{variant:"h5",style:{color:"white"},fontStyle:"italic",children:"find us all over Melbourne"}),Object(y.jsx)(j.a,{variant:"h5",style:{color:"white",paddingBottom:"60px"},fontStyle:"italic",children:"search for vans near you and order now for an easy pick-up!"}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"body",style:{color:"white"},fontStyle:"italic",children:["Your Location:"," ",null==t?"No location, please enable location in your browser!":"(".concat(Math.round(1e4*t.coords.latitude)/1e4,", ").concat(Math.round(1e4*t.coords.longitude)/1e4,")")]}),Object(y.jsx)(ye,{vans:o,location:t}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),null===o?"":Object(y.jsx)(Oe,{vans:o}),Object(y.jsx)("br",{})]})})},we=n(451);var Ce=e=>{const{auth:t,setAuth:n}=e,[o,c]=Object(a.useState)(!1),[r,i]=Object(a.useState)(!1),h=Object(s.g)(),u=()=>{c(!1),i(!1)};return Object(y.jsxs)(d.a,{children:[t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{variant:"h3",children:"Account Details"}),Object(y.jsx)("br",{}),Object(y.jsxs)(j.a,{variant:"subtitle",children:["You are logged in as ",f.a.decode(t).given_name," ",f.a.decode(t).family_name,"."]}),Object(y.jsx)("br",{}),Object(y.jsx)(b.a,{component:we.a,variant:"outlined",to:"/customer/login",style:{textDecoration:"none"},children:Object(y.jsx)(j.a,{variant:"button",display:"block",onClick:e=>{e.preventDefault(),n(null),console.log("Logged Out")},children:"Log Out"})}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),h.push("/customer/login");const n={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t)};if(""!=e.target.password.value){const a={given_name:e.target.given_name.value,family_name:e.target.family_name.value,email:e.target.email.value,password:e.target.password.value};p()({url:"".concat(O,"/customers/").concat(f.a.decode(t)._id),method:"PATCH",data:a,headers:n}).then((e=>{e.data&&(console.log("Change details for customer %s",f.a.decode(t)._id),console.log(a),c((e=>!e)))})).catch((e=>{console.error(e)}))}else console.log("Requires password!"),i((e=>!e))},children:[Object(y.jsxs)(l.a,{container:!0,direction:"row",children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em"},children:Object(y.jsx)(m.a,{required:!0,name:"given_name",label:"Given Name",defaultValue:f.a.decode(t).given_name,variant:"filled"})}),Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em",marginLeft:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"family_name",label:"Family Name",defaultValue:f.a.decode(t).family_name,variant:"filled"})})]}),Object(y.jsxs)(l.a,{container:!0,direction:"row",children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"email",label:"Email Address",defaultValue:f.a.decode(t).email,variant:"filled"})}),Object(y.jsx)(l.a,{item:!0,style:{marginTop:"0.5em",marginLeft:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"password",type:"password",label:"Password",defaultValue:f.a.decode(t).password,variant:"filled"})})]}),Object(y.jsx)(b.a,{variant:"contained",color:"primary",disableElevation:!0,style:{marginTop:"1em"},children:"Change Profile Details"}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:o,onClose:u,message:"Changed Profile Details!"})]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{variant:"h3",children:"Welcome Back!"}),Object(y.jsx)("br",{}),Object(y.jsx)(j.a,{variant:"subtitle",children:"Please log in before confirming your order."}),Object(y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault();const t={email:e.target.email.value,password:e.target.password.value};p()({url:"".concat(O,"/customers/login"),method:"POST",data:t,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((e=>{n(e.data);const t=f.a.decode(e.data);t?(console.log(e.data),console.log(t),h.push("/customer/myorder")):console.err("Invalid token")})).catch((e=>{console.error(e),console.log("Invalid login"),h.push("/customer/login")}))},children:[Object(y.jsxs)(l.a,{container:!0,direction:"column",children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em"},children:Object(y.jsx)(m.a,{required:!0,name:"email",label:"Email Address",variant:"outlined"})}),Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em"},children:Object(y.jsx)(m.a,{required:!0,name:"password",type:"password",label:"Password",variant:"outlined"})})]}),Object(y.jsx)(b.a,{variant:"contained",color:"primary",disableElevation:!0,style:{marginTop:"1em",marginBottom:"1em"},children:"Sign in"})]}),Object(y.jsx)(we.a,{variant:"body2",href:"/customer/registration",children:"New to Snacks In A Van? Create an account."})]}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:r,onClose:u,message:"Please input a password! (You can input a new password)."})]})};var Ie=e=>{const{auth:t}=e,n=Object(s.g)();return Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h3",children:"Create an account."}),Object(y.jsx)("br",{}),t?"You are logged in as ".concat(f.a.decode(t).given_name," ").concat(f.a.decode(t).family_name):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{variant:"subtitle",children:"Please register to start ordering."}),Object(y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),n.push("/customer/login");const t={given_name:e.target.given_name.value,family_name:e.target.family_name.value,email:e.target.email.value,password:e.target.password.value};p()({url:"".concat(O,"/customers"),method:"POST",data:t,headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}}).then((()=>{t&&(console.log("Create new customer"),console.log(t))})).catch((e=>{console.error(e)}))},children:[Object(y.jsxs)(l.a,{container:!0,direction:"row",children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em"},children:Object(y.jsx)(m.a,{required:!0,name:"given_name",label:"Given Name",variant:"outlined"})}),Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em",marginLeft:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"family_name",label:"Family Name",variant:"outlined"})})]}),Object(y.jsxs)(l.a,{container:!0,direction:"row",children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"email",label:"Email Address",variant:"outlined"})}),Object(y.jsx)(l.a,{item:!0,style:{marginTop:"0.5em",marginLeft:"0.5em"},children:Object(y.jsx)(m.a,{required:!0,name:"password",type:"password",label:"Password",variant:"outlined"})})]}),Object(y.jsx)(b.a,{variant:"contained",color:"primary",disableElevation:!0,style:{marginTop:"1em"},children:"Register"})]})]})]})};const ke=["Item","Qty","Subtotal"],Se=new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"});var Pe=e=>{const{order:t,setOrder:n,auth:o}=e,c=Object(s.g)(),[r,i]=Object(a.useState)(!1),[m,h]=Object(a.useState)(!1);return Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"My Order"}),t&&t.items&&0!==Object.keys(t.items).length?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(P.a,{children:Object(y.jsxs)(D.a,{children:[Object(y.jsx)(B.a,{children:Object(y.jsx)(_.a,{children:ke.map((e=>Object(y.jsx)(T.a,{children:e},e)))})}),Object(y.jsxs)(R.a,{children:[Object.keys(t.items).map(((e,n)=>Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{children:t.items[e].item_name}),Object(y.jsx)(T.a,{children:t.items[e].quantity}),Object(y.jsx)(T.a,{children:Se.format(t.items[e].quantity*t.items[e].item_price)})]},n))),Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{children:Object(y.jsxs)(j.a,{variant:"subtitle2",gutterBottom:!0,children:["Total:"," ",Se.format(Object.keys(t.items).map((e=>t.items[e].quantity*t.items[e].item_price)).reduce(((e,t)=>e+t)))]})})]})]})]})}),Object(y.jsx)("br",{}),Object(y.jsxs)(l.a,{container:!0,style:{justifyContent:"space-around"},children:[Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",onClick:e=>{e.preventDefault(),n({items:{},confirmed:!1}),console.log("cleared order")},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Cancel Order"})})}),Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",children:Object(y.jsx)(b.a,{component:ie.b,to:"/customer/van/".concat(t.vendor),style:{textDecoration:"none"},children:"Edit Order Details"})})}),Object(y.jsxs)(l.a,{item:!0,children:[Object(y.jsx)(b.a,{variant:"outlined",onClick:e=>{if(e.preventDefault(),!o)return console.log("please log in"),void c.push("/customer/login");n({...t,confirmed:!0});const a={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(o)},r={items:Object.keys(t.items).map((e=>({...t.items[e],item:e})))};p.a.post("".concat(O,"/vendors/").concat(t.vendor,"/orders"),r,{headers:a}).then((e=>{n({items:{},confirmed:!1}),console.log("cleared order"),console.log(e)})).catch((e=>{console.error(e)}))},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Confirm Order"})}),t.confirmed?Object(y.jsx)(s.a,{to:"/customer/orders"}):null]})]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{variant:"subtitle",display:"block",style:{marginBottom:"2rem"},children:"Your order is empty! Try finding a van to start ordering snacks."}),Object(y.jsx)(b.a,{variant:"outlined",children:Object(y.jsx)(b.a,{component:ie.b,to:"/customer/orders",style:{textDecoration:"none"},children:Object(y.jsx)(j.a,{variant:"button",display:"block",children:"Order History"})})})]})]})},De=n(452);var Be=e=>{const{menuItem:t,order:n,setOrder:a,vendor:o}=e;return Object(y.jsx)(l.a,{item:!0,children:Object(y.jsxs)(C.a,{variant:"outlined",style:{width:"100%"},children:[Object(y.jsx)(re.a,{component:"img",image:"http://".concat(t.item_image_url),title:"Menu Item"}),Object(y.jsxs)(X.a,{children:[Object(y.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.item_name}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["$",t.item_price]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",style:n.items[t._id]&&n.items[t._id].quantity>0?{color:"#e69705"}:{},children:[n.items[t._id]?n.items[t._id].quantity:0," ","in current order"]})]}),Object(y.jsx)(De.a,{children:Object(y.jsx)(b.a,{style:{margin:"auto"},onClick:e=>{e.preventDefault(),console.log("add ".concat(t.item_name," to order"));let c=JSON.parse(JSON.stringify(n));const r=t._id;if(c.items.hasOwnProperty(t._id))c.items[r].quantity++,a(c);else{let e=JSON.parse(JSON.stringify(c.items));const{item_price:n,item_name:i}=t;e[r]={quantity:1,item_price:n,item_name:i},c={...c,items:e,vendor:o},a(c)}console.log(n)},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Add to Order"})})}),Object(y.jsx)(De.a,{children:Object(y.jsx)(b.a,{style:{margin:"auto"},onClick:e=>{e.preventDefault(),console.log("remove 1 ".concat(t.item_name," from order"));let o=JSON.parse(JSON.stringify(n));const c=t._id;o.items.hasOwnProperty(t._id)?(o.items[t._id].quantity>0&&o.items[c].quantity--,0===o.items[t._id].quantity&&delete o.items[t._id],a(o)):console.log("removed an item that doesn't exist in the order"),console.log(n)},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Remove from Order"})})})]})})};var _e=e=>{const{auth:t,vans:n,menu:o,setMenu:c,order:r,setOrder:i}=e,m=e.match.params.id,[h,u]=Object(a.useState)(null);Object(s.g)();return Object(a.useEffect)((()=>{if(!h)if(n){const e=n.filter((e=>e._id===m));0!==e.length&&(console.log("found this van without needing another API call"),u(e[0]))}else{console.log("getting individual van data");const e={"Access-Control-Allow-Origin":"*"};p()("".concat(O,"/vendors/").concat(m),{headers:e}).then((e=>{let t=e.data;u(t)})).catch((e=>{console.error(e)}))}}),[h,n,m]),Object(a.useEffect)((()=>{if(!o){console.log("getting menu");const e={"Access-Control-Allow-Origin":"*"};p()("".concat(O,"/items"),{headers:e}).then((e=>{c(e.data)})).catch((e=>{console.error(e)}))}}),[]),Object(y.jsxs)(d.a,{children:[null===h||void 0===h?Object(y.jsx)(j.a,{variant:"h3",children:"Van Details Loading..."}):Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(y.jsx)(j.a,{variant:"h3",children:h.van_name}),Object(y.jsx)(j.a,{variant:"body",display:"block",style:{marginBottom:"1rem"},children:isNaN(h.distance)?null:"This van is ".concat(Math.round(10*h.distance)/10,"km away!")}),Object(y.jsxs)(he.a,{rating:h.rating,widgetDimensions:"30px",widgetSpacings:"8px",children:[Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"}),Object(y.jsx)(he.a.Widget,{widgetRatedColor:"orange"})]}),null===o?"":Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(l.a,{container:!0,direction:"row",spacing:2,style:{marginTop:"2rem"},children:o.map(((e,t)=>Object(y.jsx)(l.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(y.jsx)(Be,{menuItem:e,order:r,setOrder:i,vendor:h._id},t)},t)))})})]}),Object(y.jsx)("br",{}),Object(y.jsxs)(l.a,{container:!0,style:{justifyContent:"space-around"},children:[Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",onClick:e=>{e.preventDefault(),i({items:{},confirmed:!1}),console.log("cleared order")},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Cancel Order"})})}),Object(y.jsxs)(l.a,{item:!0,children:[Object(y.jsx)(b.a,{variant:"outlined",component:ie.b,to:"/customer/myorder",style:{textDecoration:"none"},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Review Order"})}),r.confirmed?Object(y.jsx)(s.a,{to:"/customer/orders"}):null]})]}),Object(y.jsx)("br",{})]})},Te=n(424),Re=n(430),Ne=n(52);const ze=["Item","Qty","Subtotal"],Fe=new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}),We=Object(F.a)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});Object(Ne.a)({iconFilled:{color:"#ff6d75"},iconHover:{color:"#ff3d47"}})(Re.a);var Ye=e=>{const{order:t,auth:n,removeOrder:o}=e,[c,r]=Object(a.useState)(null),[i,s]=Object(a.useState)(""),[d,u]=Object(a.useState)(""),[x,v]=Object(a.useState)(null),[f,A]=Object(a.useState)(!1),[w,I]=Object(a.useState)(!1);var k;const S=We(),N=()=>{I((e=>!e))};return Object(a.useEffect)((()=>{console.log("getting rating");const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)};p()("".concat(O,"/vendors/").concat(t.vendor,"/orders/").concat(t._id),{headers:e}).then((e=>{console.log(e.data.rating),r(e.data.rating),s(e.data.comment),e.data.comment&&console.log(e.data.comment)}))}),[]),Object(a.useEffect)((()=>{const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)};p()("".concat(O,"/vendors/").concat(t.vendor),{headers:e}).then((e=>{console.log(e.data.van_name),u(e.data.van_name)}))}),[]),Object(a.useEffect)((()=>{console.log("getting items"),p()("".concat(O,"/items")).then((e=>{v(e.data)}))}),[]),k=W(x),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(h.a,{theme:g,children:[Object(y.jsxs)(C.a,{className:S.root,variant:"outlined",style:{marginTop:"20px"},children:[0!==Object.keys(k).length&&Object(y.jsxs)(X.a,{children:[Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",children:["Order"," "]}),Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",style:{color:"#FAA545"},children:["#",parseInt(t._id.slice(-4),16).toString().slice(-4)]}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["Bought from ",d," ",t.modified?"on ".concat(G(t.modified)):null]}),Object(y.jsxs)(l.a,{item:!0,children:[t.fulfilled?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontSize:14,color:"green"},children:Object(y.jsxs)("td",{children:["Fulfilled ","\ud83d\uddf9"]})})}):Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontSize:14,color:"grey"},children:Object(y.jsxs)("td",{children:["Fulfilled ","\u2610"]})}),t.picked_up?Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontSize:14,color:"green"},children:Object(y.jsxs)("td",{children:["Picked Up ","\ud83d\uddf9"]})})}):Object(y.jsx)("p",{style:{fontFamily:"Roboto",fontSize:14,color:"grey"},children:Object(y.jsxs)("td",{children:["Picked Up ","\u2610"]})})]}),0!==Object.keys(k).length&&t.items&&0!==Object.keys(t.items).length&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(P.a,{children:Object(y.jsxs)(D.a,{children:[Object(y.jsx)(B.a,{children:Object(y.jsx)(_.a,{children:ze.map((e=>Object(y.jsx)(T.a,{children:e},e)))})}),Object(y.jsxs)(R.a,{children:[Object.keys(t.items).map(((e,n)=>Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{children:k[t.items[e].item].item_name}),Object(y.jsx)(T.a,{children:t.items[e].quantity}),Object(y.jsx)(T.a,{children:Fe.format(t.items[e].quantity*k[t.items[e].item].item_price)})]},n))),Object(y.jsxs)(_.a,{children:[Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{}),Object(y.jsx)(T.a,{children:Object(y.jsxs)(j.a,{variant:"subtitle2",gutterBottom:!0,children:["Total:"," ",Fe.format(Object.keys(t.items).map((e=>t.items[e].quantity*k[t.items[e].item].item_price)).reduce(((e,t)=>e+t)))]})})]})]})]})}),Object(y.jsx)("br",{})]}),Object(y.jsxs)(l.a,{container:!0,style:{justifyContent:"space-around"},children:[!t.fulfilled&&L(t.modified)?Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,component:ie.b,to:{pathname:"/customer/modify/".concat(t.vendor,"/").concat(t._id),order:t},style:{textDecoration:"none"},children:"Modify Order"})})}):null,!t.fulfilled&&L(t.modified)?Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",onClick:e=>{e.preventDefault(),console.log("cancelling order");const a={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)};p.a.delete("".concat(O,"/vendors/").concat(t.vendor,"/orders/").concat(t._id),{headers:a}).then((e=>{console.log("deleted order"),o(t._id),A((e=>!e))})).catch((e=>{console.error(e)}))},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Cancel Order"})})}):null,Object(y.jsx)(l.a,{item:!0})]})]}),Object(y.jsxs)(Te.a,{component:"fieldset",mb:3,borderColor:"transparent",children:[Object(y.jsx)(j.a,{component:"legend",children:"Please take a moment to rate your experience!"}),Object(y.jsx)(Re.a,{name:"customer-rating"+t._id,precision:.5,size:"large",value:c,onChange:(e,a)=>{r(a),console.log(a),(e=>{console.log("Ratings changed to:"),console.log(e);const a={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)},o={rating:e};p()({url:"".concat(O,"/vendors/").concat(t.vendor,"/orders/").concat(t._id),method:"PATCH",data:o,headers:a}).then((e=>{e.data&&(console.log("Changed rating for %s to",t.vendor),console.log(e.data))})).catch((e=>{console.error(e)}))})(a)}}),Object(y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),N();const a={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(n)},o={comment:e.target.comment.value};p()({url:"".concat(O,"/vendors/").concat(t.vendor,"/orders/").concat(t._id),method:"PATCH",data:o,headers:a}).then((e=>{e.data&&(console.log("Submitted comment:"),console.log(e.data))})).catch((e=>{console.error(e)}))},children:[Object(y.jsx)(l.a,{item:!0,style:{marginTop:"1em"},children:Object(y.jsx)(m.a,{name:"comment",label:"Comment",color:"orange",defaultValue:i,variant:i?"filled":"outlined",style:{width:"70%"}})}),Object(y.jsx)(b.a,{variant:"contained",color:"orange",style:{marginTop:"1em",marginBottom:"1em"},disableElevation:!0,children:"Submit"})]})]})]}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:f,onClose:()=>{A(!1)},message:"Order cancelled!"}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:w,onClose:()=>{I(!1)},message:"Thanks for reviewing!"})]})})};var Le=e=>{const[t,n]=Object(a.useState)(null),{auth:o}=e,c=e=>{let a=JSON.parse(JSON.stringify(t));n(a.filter((t=>t._id!==e)))};return Object(a.useEffect)((()=>{const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(o)},t=setInterval((()=>{if(o){const t=o?f.a.decode(o)._id:null;p()("".concat(O,"/customers/").concat(t,"/orders"),{headers:e}).then((e=>{n(e.data)}))}else console.log("no auth yet, so let's wait until they're logged in")}),1e3);return()=>clearInterval(t)}),[o]),o?Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"My Orders"}),null==t?null:0===t.length?"You have no current or past orders!":t.sort(((e,t)=>-(new Date(e.modified)-new Date(t.modified)))).map((e=>Object(y.jsx)(Ye,{order:e,auth:o,removeOrder:c})))]}):Object(y.jsxs)(d.a,{children:[Object(y.jsx)(j.a,{variant:"h2",children:"My Orders"}),Object(y.jsx)(j.a,{variant:"subtitle",children:"Please log in before viewing your orders!"})]})};var Ge=e=>{const{menuItem:t,modifiedOrder:n,setModifiedOrder:a}=e;return Object(y.jsx)(l.a,{item:!0,children:Object(y.jsxs)(C.a,{variant:"outlined",style:{width:"100%"},children:[Object(y.jsx)(re.a,{component:"img",image:"http://".concat(t.item_image_url),title:"Menu Item"}),Object(y.jsxs)(X.a,{children:[Object(y.jsx)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.item_name}),Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",children:["$",t.item_price]}),n?Object(y.jsxs)(j.a,{variant:"body2",color:"textSecondary",component:"p",style:n.items.filter((e=>e.item===t._id)).length>0&&n.items.filter((e=>e.item===t._id))[0].quantity>0?{color:"#e69705"}:{},children:[n.items.filter((e=>e.item===t._id)).length>0?n.items.filter((e=>e.item===t._id))[0].quantity:0," ","in current order"]}):null]}),Object(y.jsx)(De.a,{children:Object(y.jsx)(b.a,{style:{margin:"auto"},onClick:e=>{if(n){e.preventDefault(),console.log("add ".concat(t.item_name," to order")),console.log(n);let o=JSON.parse(JSON.stringify(n));const c=t._id;let r=!1;if(o.items.forEach((e=>{e.item===c&&(r=!0,console.log("found the right thing"),e.hasOwnProperty("quantity")&&e.quantity++)})),!r){console.log("add new item with q 1");let e=JSON.parse(JSON.stringify(o.items));e.push({quantity:1,item:c}),o={...o,items:e}}a(o)}},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Add to Order"})})}),Object(y.jsx)(De.a,{children:Object(y.jsx)(b.a,{style:{margin:"auto"},onClick:e=>{e.preventDefault(),console.log("remove 1 ".concat(t.item_name," from order"));let o=JSON.parse(JSON.stringify(n));const c=t._id;o.items.forEach(((e,t)=>{e.item===c&&e.hasOwnProperty("quantity")&&(e.quantity--,0===e.quantity&&o.items.splice(t,1))})),a(o)},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Remove from Order"})})})]})})};var Ve=e=>{const{auth:t,menu:n,setMenu:o,order:c}=e,r=e.match.params.vendor_id,i=e.match.params.order_id,[s,m]=Object(a.useState)(null);Object(a.useEffect)((()=>{m(c)}),[c]);const[h,u]=Object(a.useState)(!1);Object(a.useEffect)((()=>{if(!s&&t){console.log("getting order");const e={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t)};p()("".concat(O,"/vendors/").concat(r,"/orders/").concat(i),{headers:e}).then((e=>{m(e.data)})).catch((e=>{console.error(e)}))}}),[]),Object(a.useEffect)((()=>{if(!n){console.log("getting menu");const e={"Access-Control-Allow-Origin":"*"};p()("".concat(O,"/items"),{headers:e}).then((e=>{o(e.data)})).catch((e=>{console.error(e)}))}}),[]);return t?Object(y.jsxs)(d.a,{children:[Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",children:["Updating Order"," "]}),Object(y.jsxs)(j.a,{gutterBottom:!0,variant:"h5",component:"h2",display:"inline",style:{color:"#FAA545"},children:["#",parseInt(i.slice(-4),16).toString().slice(-4)]}),null===n?"":Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.a,{container:!0,direction:"row",spacing:2,style:{marginTop:"2rem"},children:n.map(((e,t)=>Object(y.jsx)(l.a,{item:!0,xs:12,sm:6,md:4,lg:3,children:Object(y.jsx)(Ge,{menuItem:e,modifiedOrder:s,setModifiedOrder:m},t)},t)))}),Object(y.jsxs)(l.a,{container:!0,style:{justifyContent:"space-around",marginTop:"2rem",marginBottom:"1rem"},children:[Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",children:Object(y.jsx)(b.a,{component:ie.b,to:"/customer/orders",style:{textDecoration:"none"},children:"Back to My Orders"})})}),Object(y.jsx)(l.a,{item:!0,children:Object(y.jsx)(b.a,{variant:"outlined",onClick:e=>{e.preventDefault(),console.log("getting vendor");const n={"Access-Control-Allow-Origin":"*",Authorization:"Bearer ".concat(t)};console.log(s),p.a.patch("".concat(O,"/vendors/").concat(s.vendor,"/orders/").concat(s._id),s,{headers:n}).then((e=>{u((e=>!e))})).catch((e=>{console.log(e)}))},children:Object(y.jsx)(j.a,{variant:"button",display:"block",gutterBottom:!0,children:"Update Order"})})})]})]}),Object(y.jsx)(z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:h,onClose:()=>{u(!1)},message:"Order Modified!"})]}):Object(y.jsx)(d.a,{children:Object(y.jsx)("p",{children:"Please sign in before modifying an order!"})})};var Me=()=>{const[e,t]=Object(a.useState)(null),[n,o]=Object(a.useState)(null),[c,r]=Object(a.useState)(null),[l,d]=Object(a.useState)({items:{},confirmed:!1}),[j,m]=Object(a.useState)(null);return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(i.a,{}),Object(y.jsx)(me,{order:l,auth:j}),Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{exact:!0,path:"/customer/",render:()=>Object(y.jsx)(Ae,{location:e,setLocation:t,vans:n,setVans:o})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/login",render:()=>Object(y.jsx)(Ce,{auth:j,setAuth:m})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/registration",render:()=>Object(y.jsx)(Ie,{auth:j})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/myorder",render:()=>Object(y.jsx)(Pe,{auth:j,order:l,setOrder:d})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/orders",render:()=>Object(y.jsx)(Le,{auth:j})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/modify/:vendor_id/:order_id",render:e=>Object(y.jsx)(Ve,{...e,auth:j,menu:c,setMenu:r})}),Object(y.jsx)(s.b,{exact:!0,path:"/customer/van/:id",render:e=>Object(y.jsx)(_e,{...e,auth:j,vans:n,menu:c,setMenu:r,order:l,setOrder:d})})]})]})};var Ee=()=>Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(i.a,{}),Object(y.jsxs)(s.d,{children:[Object(y.jsx)(s.b,{path:"/vendor",component:de}),Object(y.jsx)(s.b,{path:"/customer",component:Me})]})]});r.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(h.a,{theme:g,children:Object(y.jsx)(ie.a,{children:Object(y.jsx)(Ee,{})})})}),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.3f95313a.chunk.js.map